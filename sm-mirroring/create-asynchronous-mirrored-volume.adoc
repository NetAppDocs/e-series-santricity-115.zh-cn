---
permalink: sm-mirroring/create-asynchronous-mirrored-volume.html 
sidebar: sidebar 
keywords: create, asynchronous, mirrored, volume 
summary: 您可以异步镜像卷以在远程存储阵列上维护数据、使其成为本地存储阵列上的时间点一致数据副本。为此、您可以创建镜像一致性组以在两个存储阵列之间建立镜像关系、然后选择要在镜像中使用的主卷和二级卷。 
---
= 创建异步镜像卷
:allow-uri-read: 
:experimental: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您可以异步镜像卷以在远程存储阵列上维护数据、使其成为本地存储阵列上的时间点一致数据副本。为此、您可以创建镜像一致性组以在两个存储阵列之间建立镜像关系、然后选择要在镜像中使用的主卷和二级卷。

.开始之前
* 必须设置以下条件：
+
** Web服务代理服务正在运行。
** SANtricity 统一管理器正在通过HTTPS连接在本地主机上运行。
** 主阵列和二级阵列中的每个控制器都必须配置一个以太网管理端口、并且必须连接到您的网络。
** SANtricity 统一管理器显示的是存储阵列的有效SSL证书。您可以使用Unified Manager接受自签名证书或安装自己的安全证书、并导航到菜单：Certificate[证书管理]。
** SANtricity System Manager可从Unified Manager启动。
** 您必须已发现要在其中镜像数据的两个存储阵列。然后、在Unified Manager中、选择主卷的存储阵列、然后单击启动以打开基于浏览器的SANtricity 系统管理器。


* 您必须知道本地和远程存储阵列的密码。
* 本地和远程存储阵列必须通过光纤通道网络结构或iSCSI接口进行连接。


异步镜像卷的过程是一个多步骤操作步骤 ：

* <<Step 1: Create a mirror consistency group or select an existing one>>
* <<Step 2: Select the primary volume>>
* <<Step 3: Select the secondary volume>>


一个卷只能参与一个镜像关系。



== 第1步：创建镜像一致性组或选择现有镜像一致性组

[role="lead"]
您可以创建镜像一致性组或选择现有镜像一致性组、以便在本地存储阵列和远程存储阵列之间建立镜像关系。

您可以创建的镜像一致性组关系和镜像对关系的数量取决于存储阵列中的硬件。

.步骤
. 要访问异步镜像序列、请执行以下操作之一：
+
** 选择菜单：Storage[异步镜像>创建镜像对]。
** 选择菜单：Storage[卷>复制服务>异步镜像卷]。


. 选择现有镜像一致性组或创建新的镜像一致性组。
+
要创建新的镜像一致性组、请执行以下操作：

+
.. 输入一个唯一名称、以最准确地描述要在两个存储阵列之间镜像的卷上的数据(例如、R&D Data)。
.. 选择要与本地存储阵列建立镜像关系的远程存储阵列。
+
[NOTE]
====
如果远程存储阵列受密码保护、则系统会提示输入密码。

====
.. 选择是手动还是自动重新同步远程存储阵列上的镜像对。
+
*** *手动*—您必须使用手动重新同步菜单选项显式更新二级时间点映像。选择此选项可手动为异步镜像组中的所有异步镜像对启动重新同步。
*** *自动*—使用下拉列表指定从上次更新开始到下次更新开始的时间。要将自动同步间隔从默认的每10分钟更改一次、请编辑间隔值、该值以分钟为单位进行定义。


.. 单击创建。
+
System Manager会首先在本地存储阵列上创建镜像一致性组、然后在远程存储阵列上创建镜像一致性组。

+
[NOTE]
====
如果System Manager在本地存储阵列上成功创建镜像一致性组、但无法在远程存储阵列上创建该一致性组、则它会自动从本地存储阵列中删除镜像一致性组。如果System Manager尝试删除镜像一致性组时出错、您必须手动将其删除。

====


. 选择*下一步*并转到 <<Step 2: Select the primary volume>>。




== 第2步：选择主卷

[role="lead"]
您必须选择要在镜像关系中使用的主卷并分配其预留容量。添加到本地存储阵列上的镜像一致性组中的任何卷都将在镜像关系中担任主角色。

.步骤
. 选择要用作镜像中主卷的现有卷、然后单击*下一步*以分配预留容量。
. 为选定的主卷分配预留容量。执行以下操作之一：
+
** *接受默认设置*-使用此建议选项使用默认设置为主卷分配预留容量。
** *分配您自己的预留容量设置以满足与异步镜像相关的数据存储需求*-按照以下准则分配预留容量。
+
*** 预留容量的默认设置为基础卷容量的20%、通常此容量已足够。
*** 所需容量因向主卷写入I/O的频率和大小以及保留容量所需的时间而异。
*** 通常、如果存在以下一种或两种情况、请为预留容量选择更大的容量：
+
**** 您打算将镜像对保留很长时间。
**** 由于I/O活动繁重、主卷上的数据块会发生很大一部分更改。使用历史性能数据或其他操作系统实用程序帮助您确定主卷的典型I/O活动。






. 选择*下一步*并转到 <<Step 3: Select the secondary volume>>。




== 第3步：选择二级卷

[role="lead"]
您必须选择要在镜像关系中使用的二级卷并分配其预留容量。添加到远程存储阵列上的镜像一致性组的任何卷都将在镜像关系中具有二级角色。

在远程存储阵列上选择二级卷时、系统会显示一个列表、其中列出了该镜像对符合条件的所有卷。不符合使用条件的任何卷不会显示在该列表中。

.步骤
. 选择要用作镜像对中二级卷的现有卷、然后单击*下一步*以分配预留容量。
. 为选定的二级卷分配预留容量。执行以下操作之一：
+
** *接受默认设置*-使用此建议选项以默认设置为二级卷分配预留容量。
** *分配您自己的预留容量设置以满足与异步镜像相关的数据存储需求*-按照以下准则分配预留容量。
+
*** 预留容量的默认设置为基础卷容量的20%、通常此容量已足够。
*** 所需容量因向主卷写入I/O的频率和大小以及保留容量所需的时间而异。
*** 通常、如果存在以下一种或两种情况、请为预留容量选择更大的容量：
+
**** 您打算将镜像对保留很长时间。
**** 由于I/O活动繁重、主卷上的数据块会发生很大一部分更改。使用历史性能数据或其他操作系统实用程序帮助您确定主卷的典型I/O活动。






. 选择*完成*以完成异步镜像序列。


System Manager将执行以下操作：

* 开始在本地存储阵列和远程存储阵列之间进行初始同步。
* 如果要镜像的卷是精简卷、则在初始同步期间、只会将配置的块(已分配容量而不是报告的容量)传输到二级卷。这样可以减少完成初始同步所需传输的数据量。
* 在本地存储阵列和远程存储阵列上为镜像对创建预留容量。

